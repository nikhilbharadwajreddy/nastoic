<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Nastoic â€” Profile</title>

  <!-- Load Clerk script from CDN -->
  <script
    src="https://cdn.jsdelivr.net/npm/@clerk/clerk-js@5/dist/clerk.browser.js"
    data-clerk-publishable-key="pk_live_Y2xlcmsubmFzdG9pYy5jb20k"
    defer
  ></script>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <div class="formbold-main-wrapper">
    <div class="formbold-form-wrapper">
      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
        <h1 style="margin: 0;">Nastoic</h1>
        <button id="sign-out" class="formbold-btn" style="margin: 0; background-color: #f44336;">Sign Out</button>
      </div>
      
      <div class="formbold-form-title">
        <h2>Complete Your Profile</h2>
        <p>
          Welcome to Nastoic! Please fill out your profile information below.
        </p>
      </div>

      <form id="profile-form">
        <div class="formbold-input-flex">
          <div>
            <label for="firstname" class="formbold-form-label">
              First name
            </label>
            <input
              type="text"
              name="firstname"
              id="firstname"
              class="formbold-form-input"
            />
          </div>
          <div>
            <label for="lastname" class="formbold-form-label"> Last name </label>
            <input
              type="text"
              name="lastname"
              id="lastname"
              class="formbold-form-input"
            />
          </div>
        </div>

        <div class="formbold-input-flex">
          <div>
            <label for="email" class="formbold-form-label"> Email </label>
            <input
              type="email"
              name="email"
              id="email"
              class="formbold-form-input"
              readonly
            />
          </div>
          <div>
            <label for="phone" class="formbold-form-label"> Phone number </label>
            <input
              type="text"
              name="phone"
              id="phone"
              class="formbold-form-input"
            />
          </div>
        </div>

        <div class="formbold-mb-3">
          <label for="address" class="formbold-form-label">
            Street Address
          </label>
          <input
            type="text"
            name="address"
            id="address"
            class="formbold-form-input"
          />
        </div>

        <div class="formbold-mb-3">
          <label for="address2" class="formbold-form-label">
            Street Address Line 2
          </label>
          <input
            type="text"
            name="address2"
            id="address2"
            class="formbold-form-input"
          />
        </div>

        <div class="formbold-input-flex">
          <div>
            <label for="state" class="formbold-form-label"> State/Province </label>
            <input
              type="text"
              name="state"
              id="state"
              class="formbold-form-input"
            />
          </div>
          <div>
            <label for="country" class="formbold-form-label"> Country </label>
            <input
              type="text"
              name="country"
              id="country"
              class="formbold-form-input"
            />
          </div>
        </div>

        <div class="formbold-input-flex">
          <div>
            <label for="post" class="formbold-form-label"> Post/Zip code </label>
            <input
              type="text"
              name="post"
              id="post"
              class="formbold-form-input"
            />
          </div>
          <div>
            <label for="area" class="formbold-form-label"> Area Code </label>
            <input
              type="text"
              name="area"
              id="area"
              class="formbold-form-input"
            />
          </div>
        </div>

        <div class="formbold-checkbox-wrapper">
          <label for="supportCheckbox" class="formbold-checkbox-label">
            <div class="formbold-relative">
              <input
                type="checkbox"
                id="supportCheckbox"
                class="formbold-input-checkbox"
              />
              <div class="formbold-checkbox-inner">
                <span class="formbold-opacity-0">
                  <svg
                    width="11"
                    height="8"
                    viewBox="0 0 11 8"
                    fill="none"
                    class="formbold-stroke-current"
                  >
                    <path
                      d="M10.0915 0.951972L10.0867 0.946075L10.0813 0.940568C9.90076 0.753564 9.61034 0.753146 9.42927 0.939309L4.16201 6.22962L1.58507 3.63469C1.40401 3.44841 1.11351 3.44879 0.932892 3.63584C0.755703 3.81933 0.755703 4.10875 0.932892 4.29224L0.932878 4.29225L0.934851 4.29424L3.58046 6.95832C3.73676 7.11955 3.94983 7.2 4.1473 7.2C4.36196 7.2 4.55963 7.11773 4.71406 6.9584L10.0468 1.60234C10.2436 1.4199 10.2421 1.1339 10.0915 0.951972ZM4.2327 6.30081L4.2317 6.2998C4.23206 6.30015 4.23237 6.30049 4.23269 6.30082L4.2327 6.30081Z"
                      stroke-width="0.4"
                    ></path>
                  </svg>
                </span>
              </div>
            </div>
            I agree to the defined
            <a href="#"> terms, conditions, and policies</a>
          </label>
        </div>

        <button type="submit" class="formbold-btn">Save Profile</button>
      </form>
    </div>
  </div>

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: 'Inter', sans-serif;
      background-color: #f9f9f9;
    }
    .formbold-mb-3 {
      margin-bottom: 15px;
    }
    .formbold-relative {
      position: relative;
    }
    .formbold-opacity-0 {
      opacity: 0;
    }
    .formbold-stroke-current {
      stroke: currentColor;
    }
    #supportCheckbox:checked ~ div span {
      opacity: 1;
    }

    .formbold-main-wrapper {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 48px;
      min-height: 100vh;
    }

    .formbold-form-wrapper {
      margin: 0 auto;
      max-width: 570px;
      width: 100%;
      background: white;
      padding: 40px;
      border-radius: 8px;
      box-shadow: 0px 3px 10px rgba(0, 0, 0, 0.1);
    }

    .formbold-img {
      margin-bottom: 45px;
    }

    .formbold-form-title {
      margin-bottom: 30px;
    }
    .formbold-form-title h2 {
      font-weight: 600;
      font-size: 28px;
      line-height: 34px;
      color: #07074d;
    }
    .formbold-form-title p {
      font-size: 16px;
      line-height: 24px;
      color: #536387;
      margin-top: 12px;
    }

    .formbold-input-flex {
      display: flex;
      gap: 20px;
      margin-bottom: 15px;
    }
    .formbold-input-flex > div {
      width: 50%;
    }
    .formbold-form-input {
      width: 100%;
      padding: 13px 22px;
      border-radius: 5px;
      border: 1px solid #dde3ec;
      background: #ffffff;
      font-weight: 500;
      font-size: 16px;
      color: #536387;
      outline: none;
      resize: none;
    }
    .formbold-form-input:focus {
      border-color: #6a64f1;
      box-shadow: 0px 3px 8px rgba(0, 0, 0, 0.05);
    }
    .formbold-form-label {
      color: #536387;
      font-size: 14px;
      line-height: 24px;
      display: block;
      margin-bottom: 10px;
    }

    .formbold-checkbox-label {
      display: flex;
      cursor: pointer;
      user-select: none;
      font-size: 16px;
      line-height: 24px;
      color: #536387;
    }
    .formbold-checkbox-label a {
      margin-left: 5px;
      color: #6a64f1;
    }
    .formbold-input-checkbox {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border-width: 0;
    }
    .formbold-checkbox-inner {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 20px;
      height: 20px;
      margin-right: 16px;
      margin-top: 2px;
      border: 0.7px solid #dde3ec;
      border-radius: 3px;
    }

    .formbold-btn {
      font-size: 16px;
      border-radius: 5px;
      padding: 14px 25px;
      border: none;
      font-weight: 500;
      background-color: #6a64f1;
      color: white;
      cursor: pointer;
      margin-top: 25px;
    }
    .formbold-btn:hover {
      box-shadow: 0px 3px 8px rgba(0, 0, 0, 0.05);
    }
  </style>

  <script>
    document.addEventListener('DOMContentLoaded', async () => {
      try {
        // Wait for Clerk to initialize
        await Clerk.load();

        // Redirect to login if no session
        if (!Clerk.user) {
          window.location.href = '/';
          return;
        }

        // Populate name fields if available
        if (Clerk.user.firstName) {
          document.getElementById('firstname').value = Clerk.user.firstName;
        }
        
        if (Clerk.user.lastName) {
          document.getElementById('lastname').value = Clerk.user.lastName;
        }
        
        // If first and last name aren't available but full name is
        if (!Clerk.user.firstName && !Clerk.user.lastName && Clerk.user.fullName) {
          const nameParts = Clerk.user.fullName.split(' ');
          if (nameParts.length > 0) {
            document.getElementById('firstname').value = nameParts[0];
            if (nameParts.length > 1) {
              document.getElementById('lastname').value = nameParts.slice(1).join(' ');
            }
          }
        }
        
        // Set email (read-only)
        if (Clerk.user.primaryEmailAddress) {
          document.getElementById('email').value = Clerk.user.primaryEmailAddress.emailAddress;
        }

        // Handle form submission
        document.getElementById('profile-form').addEventListener('submit', async (e) => {
          e.preventDefault();
          
          // Get form data
          const formData = new FormData(e.target);
          const userData = Object.fromEntries(formData.entries());
          
          try {
            // Here you would send data to your backend
            // For now, just show a success message
            alert('Profile updated successfully!');
            
            // You could also update some user metadata in Clerk if needed
            // await Clerk.user.update({
            //   firstName: userData.firstname,
            //   lastName: userData.lastname,
            //   // Other fields would need to be stored in metadata
            // });
          } catch (error) {
            console.error('Error saving profile:', error);
            alert('There was an error saving your profile. Please try again.');
          }
        });

        // Handle sign-out
        document.getElementById('sign-out').addEventListener('click', async () => {
          try {
            await Clerk.signOut();
            window.location.href = '/';
          } catch (error) {
            console.error('Error signing out:', error);
          }
        });
        
      } catch (error) {
        console.error('Error initializing Clerk:', error);
        alert('There was an error loading your profile. Please refresh the page or try again later.');
      }
    });
  </script>
</body>
</html>
